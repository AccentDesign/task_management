{% extends 'base.html' %}
{% load i18n static %}
{% block page_title %}Jobs{% endblock %}
{% block body_class %}{% endblock %}
{% block full_outer_content %}
    <form method="post" novalidate>
        {% csrf_token %}
        <div class="page-header">
            <div class="container d-flex align-items-center py-2">
                <span class="color-indicator" style="background: {{ object.colour }}"></span>
                <div class="h2">
                    <b>{{ object.pk }}</b> :
                    <a href="{{ object.client.get_absolute_url }}" class="underline-dotted">{{ object.client.name }}</a> /
                    <a href="{{ object.get_absolute_url }}" class="underline-dotted">{{ object.title }}</a>
                </div>
                <div class="page-header-actions">
                    <button class="button button-white" type="submit">{% trans 'Update' %}</button>
                <a class="button button-white button-clear" href="{{ object.get_absolute_url }}">{% trans 'Cancel' %}</a>
                </div>
            </div>
            <div class="container">
                <div class="page-header-tab-title">{% trans 'Recurring Costs' %}</div>
            </div>
        </div>
        <div class="container inner-content">
            {{ formset.management_form }}
            <div class="formsets" data-formset-prefix="recurring_costs">
                <table class="table-headed">
                    <thead>
                        <tr>
                            <th>{% trans 'Type' %}</th>
                            <th>{% trans 'Last Invoiced Date' %}</th>
                            <th>{% trans 'Billing Interval' %}</th>
                            <th>{% trans 'Billing Frequency' %}</th>
                            <th>{% trans 'Payment Option' %}</th>
                            <th>{% trans 'Delete' %}</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for form in formset.forms %}
                        <tr class="formset">
                            <td>
                                {% for field in form.hidden_fields %}{{ field }}{% endfor %}
                                {{ form.type }}{{ form.type.errors }}
                            </td>
                            <td>{{ form.last_invoiced_date }}{{ form.last_invoiced_date.errors }}</td>
                            <td>{{ form.billing_interval }}{{ form.billing_interval.errors }}</td>
                            <td>{{ form.billing_frequency }}{{ form.billing_frequency.errors }}</td>
                            <td>{{ form.payment_option }}{{ form.payment_option.errors }}</td>
                            <td>{{ form.DELETE }}</td>
                        </tr>
                        {% endfor %}
                        <tr class="formset-empty">
                            <td>
                                {% for field in formset.empty_form.hidden_fields %}{{ field }}{% endfor %}
                                {{ formset.empty_form.type }}{{ formset.empty_form.type.errors }}
                            </td>
                            <td>{{ formset.empty_form.last_invoiced_date }}{{ formset.empty_form.last_invoiced_date.errors }}</td>
                            <td>{{ formset.empty_form.billing_interval }}{{ formset.empty_form.billing_interval.errors }}</td>
                            <td>{{ formset.empty_form.billing_frequency }}{{ formset.empty_form.billing_frequency.errors }}</td>
                            <td>{{ formset.empty_form.payment_option }}{{ formset.empty_form.payment_option.errors }}</td>
                            <td>{{ formset.empty_form.DELETE }}</td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="6"><a class="button button-primary formset-add">{% trans 'Add' %}</a></td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>
    </form>
{% endblock %}
{% block extra_js %}
    {{ formset.media }}
    <script src="{% static 'dist/js/formset.js' %}"></script>
    <script>$('.formsets').formset();</script>
{% endblock %}